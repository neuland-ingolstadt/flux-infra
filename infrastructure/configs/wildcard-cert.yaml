---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: neuland-app-wildcard
  namespace: cert-manager
  annotations:
    # Reflector will copy this certificate to other namespaces
    reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
    reflector.v1.k8s.emberstack.com/reflection-allowed-namespaces: "neuland-app,verein-ext,monitoring,verein-int"
    reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
spec:
  secretName: neuland-app-wildcard-tls
  secretTemplate:
    annotations:
      reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
      reflector.v1.k8s.emberstack.com/reflection-allowed-namespaces: "neuland-app,verein-ext,monitoring,verein-int"
      reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
  issuerRef:
    name: letsencrypt
    kind: ClusterIssuer
  # List specific domains instead of wildcards - works with HTTP-01 challenges
  dnsNames:
  - neuland.app
  - app.neuland.app
  - api.neuland.app
  - docs.app.neuland.app
  - dev.app.neuland.app
  - ersti.neuland.app
  - dev.ersti.neuland.app
  - status.neuland.app
  - ical.neuland.app
  - api.dev.neuland.app
  - id.neuland-ingolstadt.de
  - analytics.neuland.app
  # - sso.informatik.sexy
  # - pad.eggl.one
  - dashboard.neuland.app
  # - ideas.eggl.one
